<div class="view-records-section p-6 bg-white rounded-lg shadow-lg">
    <h2 class="text-2xl font-bold text-center mb-6">Ver Alumnos y Registros</h2>

    <div class="mb-6 p-4 bg-gray-50 rounded-md border border-gray-200">
        <h3 class="text-xl font-semibold mb-2">Filtrar Alumnos</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <div>
                <label for="view-filter-age" class="block text-sm font-medium text-gray-700">Edad:</label>
                <select id="view-filter-age" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                    <option value="">Todas las Edades</option>
                </select>
            </div>
            <div>
                <label for="view-filter-sex" class="block text-sm font-medium text-gray-700">Sexo:</label>
                <select id="view-filter-sex" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                    <option value="">Todos los Sexos</option>
                    <option value="masculino">Masculino</option>
                    <option value="femenino">Femenino</option>
                </select>
            </div>
            <div>
                <label for="view-filter-height" class="block text-sm font-medium text-gray-700">Estatura mínima (cm):</label>
                <input type="number" id="view-filter-height" placeholder="Ej: 150" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
            </div>
            <div>
                <label for="view-filter-course" class="block text-sm font-medium text-gray-700">Curso:</label>
                <select id="view-filter-course" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                    <option value="">Todos los Cursos</option>
                </select>
            </div>
            <div>
                <label for="view-filter-school" class="block text-sm font-medium text-gray-700">Escuela:</label>
                <select id="view-filter-school" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                    <option value="">Todas las Escuelas</option>
                </select>
            </div>
            <div>
                <label for="view-filter-district" class="block text-sm font-medium text-gray-700">Distrito:</label>
                <select id="view-filter-district" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                    <option value="">Todos los Distritos</option>
                </select>
            </div>
        </div>
        <div class="mt-4 flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
            <button id="apply-view-filters-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-300 ease-in-out">
                Aplicar Filtros
            </button>
            <button id="print-filtered-list-btn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-md shadow-md transition duration-300 ease-in-out">
                Imprimir Lista Filtrada
            </button>
        </div>
    </div>

    <div class="mb-6 p-4 bg-gray-50 rounded-md border border-gray-200">
        <h3 class="text-xl font-semibold mb-2">Buscar o Seleccionar Alumno</h3>
        <div class="relative mb-4">
            <label for="search-input" class="block text-sm font-medium text-gray-700">Buscar por Nombre, Curso, Escuela, Distrito:</label>
            <input type="text" id="search-input" placeholder="Ej: Juan Perez 3A" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
            <ul id="search-results" class="absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto hidden"></ul>
        </div>
        <label for="select-student" class="block text-sm font-medium text-gray-700">Seleccionar Alumno de la lista:</label>
        <select id="select-student" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
            <option value="">-- Seleccionar Alumno --</option>
        </select>
    </div>

    <div id="student-records" class="hidden mt-8 p-6 bg-white rounded-lg shadow-lg" data-current-student-identity="">
        <h3 class="text-xl font-bold mb-4" id="selected-student-name-display"></h3>

        <div class="flex flex-col md:flex-row gap-6 mb-6">
            <div id="student-data-display" class="w-full md:w-1/2 p-4 bg-gray-50 rounded-md border border-gray-200">
                <p><strong>Nombre:</strong> <span id="student-name-display-span"></span></p>
                <p><strong>Edad:</strong> <span id="student-age-display-span"></span> años</p>
                <p><strong>Sexo:</strong> <span id="student-sex-display-span"></span></p>
                <p><strong>Estatura:</strong> <span id="student-height-display-span"></span> cm</p>
                <p><strong>Curso:</strong> <span id="student-course-display-span"></span></p>
                <p><strong>Escuela:</strong> <span id="student-school-display-span"></span></p>
                <p><strong>Distrito:</strong> <span id="student-district-display-span"></span></p>
                <div class="mt-4 flex space-x-2" id="student-action-buttons">
                    <button id="edit-student-data-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-300 ease-in-out">
                        <i class="fas fa-edit mr-2"></i> Editar Datos
                    </button>
                    <button id="delete-student-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-300 ease-in-out">
                        <i class="fas fa-trash-alt mr-2"></i> Eliminar Alumno
                    </button>
                </div>
                <div class="mt-4 hidden" id="student-data-edit-buttons">
                    <button id="save-student-data-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-300 ease-in-out mr-2">
                        <i class="fas fa-save mr-2"></i> Guardar
                    </button>
                    <button id="cancel-student-data-btn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-md shadow-md transition duration-300 ease-in-out">
                        <i class="fas fa-times mr-2"></i> Cancelar
                    </button>
                </div>
            </div>

            <div id="student-analysis" class="w-full md:w-1/2 p-4 bg-blue-50 rounded-md border border-blue-200">
                <h4 class="text-lg font-semibold mb-2">Análisis Comparativo y Ranking</h4>
                <div id="analysis-rows-container" class="space-y-4">
                    </div>
            </div>
        </div>

        <div class="mt-8">
            <h4 class="text-xl font-semibold mb-4">Historial de Registros de Pruebas</h4>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fecha</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tipo de Prueba</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Resultado</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ciclo Lectivo</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="records-table-body" class="bg-white divide-y divide-gray-200">
                        </tbody>
                </table>
            </div>
        </div>

        <div class="text-center mt-8">
            <button id="generate-report-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-300 ease-in-out">
                <i class="fas fa-file-alt mr-2"></i> Generar Ficha Completa (Reporte)
            </button>
        </div>
    </div>

    <style>
        /* Estilos específicos para la sección de Ver Alumnos */
        #search-results {
            max-height: 200px;
            overflow-y: auto;
            position: absolute;
            width: 100%;
            background-color: white;
            border: 1px solid #e2e8f0;
            border-radius: 0.375rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        #search-results.visible {
            display: block;
        }

        #search-results li {
            padding: 0.75rem 1rem;
            cursor: pointer;
        }

        #search-results li:hover {
            background-color: #f0f4f8;
        }

        /* Estilos para los mensajes de análisis */
        .analysis-item-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem; /* Espacio reducido para mejor optimización */
            align-items: center;
            padding: 0.5rem; /* Padding reducido */
            border-radius: 0.375rem; /* rounded-md */
            background-color: #f8fafc; /* gray-50 */
            border: 1px solid #e2e8f0; /* gray-200 */
            font-size: 0.9rem; /* Tamaño de fuente ligeramente más pequeño */
        }

        .analysis-item-row-content {
            flex: 1;
            min-width: 180px; /* Ajuste el min-width para más compactación */
        }

        .strength {
            color: #16a34a; /* green-600 */
            font-weight: 600;
        }

        .weakness {
            color: #dc2626; /* red-600 */
            font-weight: 600;
        }

        .neutral {
            color: #4b5563; /* gray-700 */
            font-weight: 500;
        }

        /* Estilos para los mensajes de evolución (si se usaran aquí, aunque se mantienen en report.html) */
        .evolution-message-container {
            padding: 0.5rem 0;
            border-radius: 0.25rem;
        }

        .evolution-message-container.positive {
            color: #16a34a; /* green-600 */
            font-weight: 500;
        }

        .evolution-message-container.negative {
            color: #dc2626; /* red-600 */
            font-weight: 500;
        }

        .evolution-message-container.neutral {
            color: #4b5563; /* gray-700 */
            font-weight: 500;
        }

        /* Estilos para los botones inline en las tablas */
        .inline-action-btn {
            background-color: #e2e8f0; /* gray-200 */
            color: #4a5568; /* gray-700 */
            padding: 0.3rem 0.6rem;
            border-radius: 0.25rem;
            font-size: 0.8rem;
            transition: background-color 0.2s;
            margin-right: 0.25rem;
        }

        .inline-action-btn:hover {
            background-color: #cbd5e0; /* gray-300 */
        }

        /* Estilos para los dropdowns multi-select */
        .multi-select-dropdown {
            position: absolute;
            background-color: white;
            border: 1px solid #e2e8f0;
            border-radius: 0.375rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 20; /* Asegura que esté por encima de otros elementos */
            max-height: 150px;
            overflow-y: auto;
            display: none; /* Oculto por defecto */
        }

        .multi-select-dropdown.visible {
            display: block;
        }
    </style>
